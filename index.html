<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://bootswatch.com/4/simplex/bootstrap.css">
    <link rel="stylesheet" href="https://allyoucan.cloud/cdn/icofont/1.0.1/icofont.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.2/styles/sunburst.min.css">
    
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/marked@0.3.6"></script>
    <script src="https://unpkg.com/lodash@4.16.0"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.2/highlight.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.0/axios.min.js"></script>

    <title>Create a post</title>
</head>
<body>
  <div id="app">
      <nav class="mb-4 navbar navbar-dark bg-dark">
        <div class="container">
          <a class="navbar-brand" href="#">Blog UI</a>
          <div class="input-field col s6">
            <input placeholder="password" id="password" v-model="key" type="Password" class="form-control">
          </div>
          <a class="btn btn-primary mr-3" @click="action = 'categories'">categories</a>
          <a class="btn btn-primary" @click="action = 'create_post'">post</a>
        </div>
      </nav>

      <div class="container" v-show="action === 'categories'">

      <div class="container">
        <h1>Create new category</h1>
        <div class="row">
          <div class="form-group col">
            <label for="title">Name</label>
            <input placeholder="category name" id="cat_name" v-model="newCategoryName" type="text" class="form-control">
          </div>
          <div class="form-group col pt-4">
            <button @click="createCategory" class="mt-1 btn btn-success">
              create
            </button>
          </div>
        </div>
      </div>

      <table class="table table-striped table-hover">
        <thead class="thead-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Category name</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="category in categories">
            <td>{{ category.id }}</td>
            <td>{{ category.name }}</td>
            <td>
              <button class="btn btn-danger">
                <i @click="deleteCategory(category.id)" class="icofont-ui-delete"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      </div>

      <div  class="container" v-show="action === 'create_post'">
        <div class="row">
          <div class="form-group col">
            <label for="title">Title</label>
            <input placeholder="title" id="title" v-model="title" type="text" class="form-control">
          </div>
          <div class="form-group col">
            <label for="title">Author</label>
            <input placeholder="author" id="author" v-model="author" type="text" class="form-control">
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <label for="category">Category</label>
            <select id="category" v-model="category_id" class="form-control">
              <option value="" disabled selected>Choose your option</option>
              <option :selected="category.id == category_id" v-for="category in categories" :value="category.id">{{ category.name }}</option>
            </select>
          </div>
          <div class="col">
            <label for="category">Edit a post</label>
            <div class="row container">
              <input placeholder="post id" min="0" id="edit" v-model="inputID" type="number" class="col-4 form-control">
              <button @click="loadEditPost" class="col-2 mx-1 btn btn-info">edit</button>
              <button @click="clear" class="col-2 mx-2 btn btn-dark">clear</button>
              <button @click="clear" class="col-2 btn btn-danger">delete</button>
            </div>
          </div>
        </div>

        <br>

        <div class="row">
          <div class="col">
            <textarea 
              style="height: 50vh; resize: none;" 
              class="input form-control" 
              :value="body" 
              @input="update"></textarea>
          </div>
          <div class="col">
            <div 
              style="height: 50vh; overflow: auto; border-radius: 5px;" 
              class="border p-2 bg-light"
              v-html="compiledMarkdown"
            ></div>
          </div>
        </div>

        <br>  
        <div>
          <button v-if="id < 0" @click="createPost" class="btn btn-success">Create</button>
          <button v-else @click="createPost" class="btn btn-warning">Update</button>
        </div>
      </div>
    </div>
  <script src="public/js/main.js"></script>
</body>
</html>